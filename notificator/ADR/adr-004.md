#### ID: ADR-004

#### Дата: 2023-10-08

#### Статус: Рассмотрено

#### Участники:
* Трошина Дарья

#### Решения:
* Использовать брокер сообщений для отправки оповещений на хэндлеры

#### Контекст:
Для компонента определили такие требования:
1. Компонент должен быть развёрнут во внутреннем контуре предприятия.
2. Компонент должен быть реализован на базе технологий с открытым исходным кодом.
3. Компонент должен поддерживать горизонтальное масштабирование и обеспечивать отказоустойчивость.
4. Компонент должен реализовывать внутреннюю маршрутизацию сообщений.
5. Сообщения должны храниться в течение определённого срока в брокере с возможностью их повторного чтения.

По итогам поисков самых популярных технологий из упоминаний в открытых источниках выбрано несколько потенциальных кандидатов:
* Kafka
* RabbitMQ
* ActiveMQ
* HiveMQ

Kafka - нет решений для маршрутизации из коробки, необходимы дополнительные решения
ActiveMQ - сложен в использование, недостаточно подробная документация
RabbitMQ - проще в использовании, хорошая документация, меньшая производительность
HiveMQ - не хранит историю сообщений, поэтому не реализует требование 5

Для использования в сервисе выбран брокер RabbitMQ как более простой вариант под MVP,
а для полноценной реализации можно рассмотреть ActiveMQ 


#### Последствия:
##### Положительные:
* гарантия сохранности оповещений при сбоях
* возможность увеличения количества очередей обработки

##### Отрицательные:
* Дополнительная нагрузка на поддержание